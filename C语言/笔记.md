# Cè¯­è¨€é›¶æ•£ç¬”è®°

è¡¥å……ç¬”è®°

## æ•°æ®ç±»å‹

### å¤§å°

1. æ•´æ•°ç±»å‹ï¼š
    short 2å­—èŠ‚
    int 4å­—èŠ‚
    long 8å­—èŠ‚

2. æµ®ç‚¹ç±»å‹ï¼š
    double 8å­—èŠ‚
    float 4å­—èŠ‚
    å®šä¹‰floatç±»å‹æ—¶éœ€å†™æˆï¼šfloat num = 0.5f;ï¼ˆå°æ•°é»˜è®¤æ˜¯doubleï¼‰

3. å­—ç¬¦ç±»å‹ï¼š
    char 1å­—èŠ‚
    å¯ä»¥è¡¨ç¤ºASCLLç ä¸­æ‰€æœ‰çš„å­—ç¬¦ï¼Œä¸èƒ½è¡¨ç¤ºä¸­æ–‡ç­‰

### å ä½ï¼ˆp73ï¼‰

%å ä½ï¼š
printfæ ¼å¼åŒ–è¾“å‡ºå‡½æ•°ï¼Œ%å ä½æ—¶æœ‰ä»¥ä¸‹å‚æ•°ï¼š```%[å ä½é•¿åº¦][.ç²¾ç¡®ä½æ•°ï¼ˆå››èˆäº”å…¥ï¼‰]```å ä½æ ¼å¼

+ %d  ä¸ºæ•´æ•°å ä½
+ %hd ä¸ºshortæ•´æ•°å ä½
+ %ld ä¸ºlongæ•´æ•°å ä½
+ %u  ä¸ºunsignedæ•´æ•°å ä½
    %luï¼Œ%hu..
    å¯¹unsignedèµ‹å€¼è´Ÿæ•°ï¼Œè¡¥ç çš„é¦–ä½ä¾ç„¶è¢«è®¤ä¸ºæ˜¯1ï¼Œä½†è¾“å‡ºæ—¶è¿™ä¸ª1æ˜¯ä¼šå¸¦å…¥äºŒè¿›åˆ¶è®¡ç®—çš„
+ %e  æŒ‡æ•°
    ä¾‹ï¼š```printf("%e",123.456);``` è¾“å‡ºï¼š```1.234560e+002```
    ä¾‹ï¼š```printf("%13.2e",123.456);``` è¾“å‡ºï¼š```(å››ä¸ªç©ºæ ¼ï¼‰1.23e+002```
+ %E %eçš„å¤§å†™
+ %i  ç­‰åŒäº%d
+ %o å…«è¿›åˆ¶è¾“å‡º
+ %x åå…­è¿›åˆ¶è¾“å‡ºï¼Œå°å†™
+ %X åå…­è¿›åˆ¶è¾“å‡ºï¼Œå¤§å†™
+ %g è‡ªåŠ¨é€‰æ‹©%fæˆ–è€…%eè¾“å‡ºï¼Œå°å†™
+ %G è‡ªåŠ¨é€‰æ‹©%fæˆ–è€…%Eè¾“å‡ºï¼Œå¤§å†™
+ %s å­—ç¬¦ä¸²

### ç§‘å­¦è®¡æ•°æ³•

```c
#include <stdio.h>
int main()
{
    printf("%lf\n", 123000000.0);      // 123000000.000000
    printf("%.2e\n", 123000000.0);     // 1.23e+008
    printf("%.2e\n", -123000000.0);    //-1.23e+008
    printf("%lf\n", 0.0000000123);     // 0.000000
    printf("%e\n", 0.0000000123);      // 1.230000e-008
    printf("%g\n", 0.0000000123);      // 1.23e-008
    printf("%.2e\n", 0.0000000123);    // 1.23e-008
    printf("%.2e\n", -0.0000000123);   //-1.23e-008
    printf("%lf, %e\n", .1e-2, .1e-2); // 0.001000, 1.000000e-003
    return 0;
}
```

### èˆå…¥èˆå‡º

æµ®ç‚¹å‹æ ¼å¼åŒ–è¾“å‡ºï¼Œå››èˆäº”å…¥ï¼š

```c
float a;
printf("%f\t%.2f\n", a, a);
```

æµ®ç‚¹å‹å¼ºåˆ¶è½¬åŒ–ï¼Œç›´æ¥ä¸¢å°æ•°ç‚¹åçš„

```c
printf("%f\t%d\n", a, (int)a);
```

## è½¬ä¹‰å­—ç¬¦

| è½¬ä¹‰å­—ç¬¦                             | å­—ç¬¦å€¼                        |
| ------------------------------------ | ----------------------------- |
| `\'`                                 | '                             |
| `\"`                                 | "                             |
| `\?`                                 | ?                             |
| `\\`                                 | `\`                           |
| `\a`                                 | è­¦å‘Š                          |
| `\b`                                 | é€€æ ¼                          |
| `\f`                                 | æ¢é¡µ                          |
| `\n`                                 | æ¢è¡Œ                          |
| `\r`                                 | å›è½¦                          |
| `\t`                                 | æ°´å¹³åˆ¶è¡¨ç¬¦                    |
| `\v`                                 | å‚ç›´åˆ¶è¡¨ç¬¦                    |
| `\oã€\ooã€\ooo`ï¼Œoä»£è¡¨ä¸€ä¸ªå…«è¿›åˆ¶æ•°å­— | ä¸è¯¥å…«è¿›åˆ¶ç å¯¹åº”çš„ASCLLå­—ç¬¦   |
| `\xh[h..]`ï¼Œhä»£è¡¨ä¸€ä¸ªåå…­è¿›åˆ¶æ•°å­—    | ä¸è¯¥åå…­è¿›åˆ¶ç å¯¹åº”çš„ASCLLå­—ç¬¦ |

## ASCIIç 

å¸¸è§ASCIIç ï¼š
' ': 32
'0': 48
'A': 65
'a': 97

## è¿ç®—ç¬¦

<table>
    <tr>
        <th>ä¼˜å…ˆçº§</th>
        <th>è¿ç®—ç¬¦</th>
        <th>å«ä¹‰</th>
        <th>è¿ç®—å¯¹è±¡ä¸ªæ•°</th>
        <th>ç»“åˆæ–¹å‘</th>
    </tr>
    <tr>
        <td rowspan=4>1</td>
        <td>( )</td>
        <td></td>
        <td rowspan=4></td>
        <td rowspan=4>â†’ğŸ‘‰</td>
    <tr>
        <td>[ ]</td>
        <td></td>
    </tr>
    <tr>
        <td> -> </td>
        <td></td>
    </tr>
    <tr>
        <td> . </td>
        <td></td>
    </tr>
    <tr>
        <td rowspan=9>2</td>
        <td>!</td>
        <td></td>
        <td rowspan=9>1</td>
        <td rowspan=9><mark>â†ğŸ‘ˆ</mark></td>
    <tr>
        <td>~</td>
        <td></td>
    </tr>
    <tr>
        <td>++</td>
        <td></td>
    </tr>
    <tr>
        <td>--</td>
        <td></td>
    </tr>
    <tr>
        <td>-</td>
        <td></td>
    </tr>
    <tr>
        <td>(ç±»å‹)</td>
        <td></td>
    </tr>
    <tr>
        <td>*</td>
        <td></td>
    </tr>
    <tr>
        <td>&</td>
        <td></td>
    </tr>
    <tr>
        <td>sizeof</td>
        <td></td>
    </tr>
    <tr>
        <td rowspan=3>3</td>
        <td>*</td>
        <td></td>
        <td rowspan=3>2</td>
        <td rowspan=3>â†’ğŸ‘‰</td>
    </tr>
    <tr>
        <td>/</td>
        <td></td>
    </tr>
    <tr>
        <td>%</td>
        <td></td>
    </tr>
    <tr>
        <td rowspan=2>4</td>
        <td>+</td>
        <td></td>
        <td rowspan=2>2</td>
        <td rowspan=2>â†’ğŸ‘‰</td>
    </tr>
    <tr>
        <td>-</td>
        <td></td>
    </tr>
    <tr>
        <td rowspan=2>5</td>
        <td><<</td>
        <td></td>
        <td rowspan=2>2</td>
        <td rowspan=2>â†’ğŸ‘‰</td>
    </tr>
    <tr>
        <td>>></td>
        <td></td>
    </tr>
    <tr>
        <td>6</td>
        <td>< <= > >=</td>
        <td></td>
        <td>2</td>
        <td>â†’ğŸ‘‰</td>
    </tr>
    <tr>
        <td rowspan=2>7</td>
        <td>==</td>
        <td></td>
        <td rowspan=2>2</td>
        <td rowspan=2>â†’ğŸ‘‰</td>
    </tr>
    <tr>
        <td>!=</td>
        <td></td>
    </tr>
    <tr>
        <td>8</td>
        <td>&</td>
        <td></td>
        <td>2</td>
        <td>â†’ğŸ‘‰</td>
    </tr>
    <tr>
        <td>9</td>
        <td>^</td>
        <td></td>
        <td>2</td>
        <td>â†’ğŸ‘‰</td>
    </tr>
    <tr>
        <td>10</td>
        <td>|</td>
        <td></td>
        <td>2</td>
        <td>â†’ğŸ‘‰</td>
    </tr>
    <tr>
        <td>11</td>
        <td>&&</td>
        <td></td>
        <td>2</td>
        <td>â†’ğŸ‘‰</td>
    </tr>
    <tr>
        <td>12</td>
        <td>||</td>
        <td></td>
        <td>2</td>
        <td>â†’ğŸ‘‰</td>
    </tr>
    <tr>
        <td>13</td>
        <td>? : </td>
        <td></td>
        <td>3</td>
        <td><mark>â†ğŸ‘ˆ</mark></td>
    </tr>
    <tr>
        <td>14</td>
        <td>= += -= *= /= %= >>= <<= &= ^= |=</td>
        <td></td>
        <td>2</td>
        <td>â†’ğŸ‘‰</td>
    </tr>
     <tr>
        <td>15</td>
        <td>,</td>
        <td></td>
        <td></td>
        <td>â†’ğŸ‘‰</td>
    </tr>
</table>

## æ–‡ä»¶æ“ä½œ

### 1. æ–‡ä»¶ç±»å‹æŒ‡é’ˆ

(p333)

```c
#include<stdio.h>
typedef struct
{
    short level;//ç¼“å†²åŒºâ€œæ»¡â€æˆ–â€œç©ºâ€çš„ç¨‹åº¦
    unsigned flags;
    char fd;
    unsigned char hold;
    short bsize;
    unsigned char *buffer;
    unsigned char *curp;
    unsigned istemp;
    short token;
}FILE;
```

### 2.æ‰“å¼€æˆ–å…³é—­æ–‡ä»¶

(p335)

```c
//å®šä¹‰
FILE *fopen(const char *restrict pathname,const char *restrict type);
//ç”¨æ³•
FILE *fp=fopen("æ–‡ä»¶å","ä½¿ç”¨æ–‡ä»¶æ–¹å¼");
```

è¡¥å……ï¼šrestrictå…³é”®å­—å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œ

### æ–‡ä»¶æ“ä½œä¾‹å­

```c
#include <stdio.h>
int main()
{
    FILE *fp;
    int e;
    long len;
    char c;
    int status;
    fp = fopen("pi.tmp", "w");
    fputs("3.1415926", fp); // len=8,SEEK_SET=>0,SEEK_END=>9
    fclose(fp);
    fp = fopen("pi.tmp", "r");
    fscanf(fp, "%d%c", &e, &c);
    printf("e=%d,c=%c\n", e, c); // e=3,c=.

    //=============== fseek & ftell test start ===============
    len = ftell(fp);
    printf("before fseek:%ld\n", len); // 2ï¼ŒæŒ‡å‘'1'ä¹‹å‰
    status = fseek(fp, -1L, SEEK_END);
    printf("fseek -1 end:%ld (%d)\n", ftell(fp), status); // 8
    rewind(fp);                                           // voidå‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼
    printf("rewind:%ld\n", ftell(fp));                    // 0
    status = fseek(fp, -1L, SEEK_SET);
    printf("fseek -1 set:%ld (%d)\n", ftell(fp), status); // 0ï¼Œfseekå¤±è´¥
    status = fseek(fp, 111L, SEEK_SET);
    printf("fseek 111 set:%ld (%d)\n", ftell(fp), status); // 111ï¼Œè™½ç„¶æ¯”æ–‡ä»¶é•¿äº†å¾ˆå¤šï¼Œä½†æ˜¯fseekæˆåŠŸ
    status = fseek(fp, -121L, SEEK_CUR);
    printf("fseek -121 cur:%ld (%d)\n", ftell(fp), status); // 111ï¼Œfseekå¤±è´¥
    status = fseek(fp, -111L, SEEK_CUR);
    printf("fseek -111 cur:%ld (%d)\n", ftell(fp), status); // 0
}
```

## ä¾‹é¢˜

### é­”æ³•é˜µ

æ€è·¯

<table>
    <tr>
        <td colspan=2>ç¬¬ä¸€æ’ï¼šif is middle: init 1;<br/>else: {row = a - 1;//<u> â†“</u><br/>col++;//â†’}</td>
        <td>å³ä¸Šè§’ï¼šrow++;//â†“</td>
    </tr>
    <tr>
        <td>row--;//â†“<br/>
    col++;//â†’</td>
        <td>row--;//â†“<br/>
    col++;//â†’</td>
        <td rowspan=2>æœ€å³åˆ—ï¼š<br/>row--;//â†‘<br/>
                col = 0;//|â†</td>
    </tr>
    <tr>
        <td>row--;//â†“<br/>
    col++;//â†’</td>
        <td>row--;//â†“<br/>
    col++;//â†’</td>
    </tr>
</table>

```c
if å·²å æ•°å­—:
    row = (row + 2) % a;//â†’â†’2ï¼Œè¶…å‡ºåˆ™|â†
    col = (col + a - 1) % a;//â†1ï¼Œè¶…å‡ºåˆ™â†’|
```

```c
#include <stdio.h>
#include <string.h>
int main()
{
    int n = 3, num, row, col, a, a2;
    int arr[101][101];
    for (a = 1; a <= n; a+=2)
    {
        memset(arr, 0, sizeof arr);
        row = 0;
        col = a / 2;
        a2 = a * a;
        for (num = 1; num <= a2; num ++)
        {
            // printf("row: %d col: %d num: %d\n",row,col,num);
            arr[row][col] = num;
            if (row == 0 && col == a - 1)
            {
                row++;
            }
            else if (row == 0)
            {
                row = a - 1;
                col++;
            }
            else if (col == n - 1)
            {
                row--;
                col = 0;
            }
            else
            {
                row--;
                col++;
            }
            if (arr[row][col] != 0)
            {
                row = (row + 2) % a;
                col = (col + a - 1) % a;
            }
        }
        for (row = 0; row < a; row++)
        {
            for (col = 0; col < a; col++)
            {
                printf("%2d ", arr[row][col]);
            }
            putchar('\n');
        }
        putchar('\n');
    }
    return 0;
}
```

## æ˜“é”™ç‚¹

+ é»˜è®¤è¾“å‡ºå…­ä½

    ```c
    printf("%f",f);
    ```

+ åå¸¸è¯†define

    ```c
    #define true 0
    #define false 1
    ```

+ ```switch```ä¸```break```å°±ç»§ç»­èµ°
+ ```fseek(fp, 0L, 2);```ä¸­ï¼Œæœ€åé‚£ä¸ªæ‰æ˜¯æŒ‡ç¤ºä»å“ªå„¿å¼€å§‹çš„ï¼Œå³```SEEK_END=2```
